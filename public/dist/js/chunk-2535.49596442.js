(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2535"],{"0bfb":function(e,t,n){"use strict";var a=n("cb7c");e.exports=function(){var e=a(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},"0e8f":function(e,t,n){"use strict";n.d(t,"e",function(){return s}),n.d(t,"d",function(){return l}),n.d(t,"g",function(){return c}),n.d(t,"f",function(){return u}),n.d(t,"h",function(){return d}),n.d(t,"c",function(){return f}),n.d(t,"a",function(){return m}),n.d(t,"i",function(){return p}),n.d(t,"b",function(){return h});n("6b54"),n("7f7f"),n("f751"),n("cadf"),n("551c"),n("097d");var a=n("66df"),r=n("c0d6"),o="departments/",s=function(e){var t=e.current_page,n=void 0===t?0:t,s=e.filter,i=void 0===s?{}:s,l=e.with,c={current_page:n,filter:i,with:["parent"].concat(l||[])};return c=Object.assign(c,{token:r["a"].state.common.token,access_token:r["a"].state.common.access_token}),a["a"].request({url:o,method:"get",params:c})},i=function(e){var t=e.filter,n=void 0===t?{}:t,s=e.with,i={filter:n,with:["parent"].concat(s||[])};return i=Object.assign(i,{token:r["a"].state.common.token,access_token:r["a"].state.common.access_token}),a["a"].request({url:o+"select_component",method:"get",params:i})},l=function(e){var t={};return t=Object.assign(t,{token:r["a"].state.common.token,access_token:r["a"].state.common.access_token}),a["a"].request({url:o+e+"/coordinate",method:"get",params:t})},c=function(){return s({current_page:0,filter:{}}).then(function(e){for(var t={},n=0;n<e.data.rows.length;n++)t[e.data.rows[n].id]=e.data.rows[n];var a=10;while(a>0){for(var r in t)0!==t[r].parent_id&&t[r].level===a&&(t[t[r].parent_id].hasOwnProperty("children")||(t[t[r].parent_id].children=[]),t[t[r].parent_id].children.push(t[r]),delete t[r]);a--}var o=[];for(var s in t)o.push(t[s]);return e.data.rows=o,e})},u=function(){return i({filter:{}}).then(function(e){for(var t=e.data,n={},a=0;a<t.length;a++)n[t[a].id]={id:t[a].id,parent_id:t[a].parent_id,label:t[a].name,level:t[a].level,value:t[a].id.toString()};var r=10;while(r>0){for(var o in n)0!==n[o].parent_id&&n[o].level===r&&(n[n[o].parent_id].hasOwnProperty("children")||(n[n[o].parent_id].children=[]),n[n[o].parent_id].children.push(n[o]),delete n[o]);r--}var s=[];for(var i in n)s.push(n[i]);return s})},d=function(){return i({filter:{},with:["Users"]}).then(function(e){for(var t=e.data,n={},a=0;a<t.length;a++){for(var r=0;r<t[a].users.length;r++)t[a].users[r].label=t[a].users[r].user_name,t[a].users[r].value=t[a].users[r].id;n[t[a].id]={id:t[a].id,parent_id:t[a].parent_id,label:t[a].name+" - 人员 "+t[a].users_count+" 人",level:t[a].level,children:t[a].users}}var o=[];for(var s in n)delete n[s]["id"],o.push(n[s]);return o})},f=function(e){var t={token:r["a"].state.common.token,access_token:r["a"].state.common.access_token};return a["a"].request({url:o+e,method:"get",params:t})},m=function(e){var t={data:e},n={token:r["a"].state.common.token,access_token:r["a"].state.common.access_token};return a["a"].request({url:o,method:"post",data:t,params:n})},p=function(e,t){var n={data:t},s={token:r["a"].state.common.token,access_token:r["a"].state.common.access_token};return a["a"].request({url:o+e,method:"put",data:n,params:s})},h=function(e){var t={token:r["a"].state.common.token,access_token:r["a"].state.common.access_token};return a["a"].request({url:o+e,method:"delete",params:t})}},"2f21":function(e,t,n){"use strict";var a=n("79e5");e.exports=function(e,t){return!!e&&a(function(){t?e.call(null,function(){},1):e.call(null)})}},3846:function(e,t,n){n("9e1e")&&"g"!=/./g.flags&&n("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:n("0bfb")})},"55dd":function(e,t,n){"use strict";var a=n("5ca1"),r=n("d8e8"),o=n("4bf8"),s=n("79e5"),i=[].sort,l=[1,2,3];a(a.P+a.F*(s(function(){l.sort(void 0)})||!s(function(){l.sort(null)})||!n("2f21")(i)),"Array",{sort:function(e){return void 0===e?i.call(o(this)):i.call(o(this),r(e))}})},"60f7":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-tree-select",{style:e.styleValue,attrs:{treeData:e.treeData,value:null!==e.value&&0!==e.value?e.value.toString():null,searchPlaceholder:"请点击选择",treeNodeFilterProp:"label"},on:{change:e.onChange}})},r=[],o=(n("24b4"),n("c405")),s={props:{value:{required:!1,default:function(){return""}},styleValue:{required:!1,default:function(){return{"min-width":"200px"}}}},model:{prop:"value",event:"change"},data:function(){return{treeData:[]}},methods:{init:function(){var e=this;Object(o["e"])().then(function(t){e.treeData=t})},onChange:function(e){this.$emit("change",e?parseInt(e):0)}},watch:{},created:function(){this.init()}},i=s,l=n("2877"),c=Object(l["a"])(i,a,r,!1,null,null,null);c.options.__file="SelectCategory.vue";t["a"]=c.exports},"6b54":function(e,t,n){"use strict";n("3846");var a=n("cb7c"),r=n("0bfb"),o=n("9e1e"),s="toString",i=/./[s],l=function(e){n("2aba")(RegExp.prototype,s,e,!0)};n("79e5")(function(){return"/a/b"!=i.call({source:"a",flags:"b"})})?l(function(){var e=a(this);return"/".concat(e.source,"/","flags"in e?e.flags:!o&&e instanceof RegExp?r.call(e):void 0)}):i.name!=s&&l(function(){return i.call(this)})},"88cd":function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-tree-select",{style:e.styleValue,attrs:{treeData:e.treeData,value:null!==e.value&&0!==e.value?e.value.toString():null,searchPlaceholder:"请点击选择",treeNodeFilterProp:"label"},on:{change:e.onChange}})},r=[],o=(n("24b4"),n("0e8f")),s={props:{value:{required:!1,default:function(){return""}},styleValue:{required:!1,default:function(){return{"min-width":"200px"}}}},model:{prop:"value",event:"change"},data:function(){return{treeData:[]}},methods:{init:function(){var e=this;Object(o["f"])().then(function(t){e.treeData=t})},onChange:function(e){this.$emit("change",e?parseInt(e):0)}},watch:{},created:function(){this.init()}},i=s,l=n("2877"),c=Object(l["a"])(i,a,r,!1,null,null,null);c.options.__file="SelectDepartment.vue";t["a"]=c.exports},a2ac:function(e,t,n){"use strict";var a=function(){var e=this,t=this,n=t.$createElement,a=t._self._c||n;return a("div",[a("a-form",{attrs:{layout:t.formLayout,autoFormCreate:function(t){e.form=t}},on:{submit:function(e){t.handleSearch(!1)}}},[t._l(t.fields,function(e){return[t.formIf(e,["user_id"])?a("a-form-item",{attrs:{colon:!1,label:e.label,labelCol:t.formItemLayout.labelCol,wrapperCol:t.formItemLayout.wrapperCol,fieldDecoratorId:e.field}},[a("SelectUser")],1):t._e(),t.formIf(e,["category_id"])?a("a-form-item",{attrs:{colon:!1,label:e.label,labelCol:t.formItemLayout.labelCol,wrapperCol:t.formItemLayout.wrapperCol,fieldDecoratorId:e.field}},[a("SelectCategory")],1):t.formIf(e,["department_id"])?a("a-form-item",{attrs:{colon:!1,label:e.label,labelCol:t.formItemLayout.labelCol,wrapperCol:t.formItemLayout.wrapperCol,fieldDecoratorId:e.field}},[a("SelectDepartment")],1):t.formIf(e,["start_timestamp","end_timestamp"])?a("a-form-item",{attrs:{colon:!1,label:e.label,labelCol:t.formItemLayout.labelCol,wrapperCol:t.formItemLayout.wrapperCol,fieldDecoratorId:e.field}},[a("DateTime")],1):t.formIf(e,["keyword"])?a("a-form-item",{attrs:{colon:!1,label:e.label,labelCol:t.formItemLayout.labelCol,wrapperCol:t.formItemLayout.wrapperCol,fieldDecoratorId:e.field}},[a("a-input",{attrs:{placeholder:"请输入"+e.label}})],1):t._e()]}),t.fields.length?a("a-form-item",{attrs:{wrapperCol:t.buttonItemLayout.wrapperCol}},[a("a-button-group",[a("a-button",{attrs:{type:"primary"},on:{click:function(e){t.handleSearch(!1)}}},[t._v("搜索")]),a("a-button",{on:{click:function(e){t.handleSearch(!0)}}},[t._v("清空")])],1)],1):t._e(),a("a-form-item",{attrs:{wrapperCol:t.buttonItemLayout.wrapperCol}},[a("a-button",{attrs:{type:"primary"},on:{click:function(e){t.handleExport()}}},[t._v("导出")])],1)],2)],1)},r=[],o=n("60f7"),s=n("c281"),i=n("88cd"),l=n("c424"),c={components:{SelectCategory:o["a"],SelectUser:s["a"],SelectDepartment:i["a"],DateTime:l["a"]},props:{fields:{required:!0,type:Array}},data:function(){return{formLayout:"inline",form:{}}},methods:{formIf:function(e,t){for(var n=0;n<t.length;n++)if(t[n]===e.field)return!0;return!1},handleFormLayoutChange:function(e){this.formLayout=e.target.value},handleSearch:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];console.log(e);var t={};if(e)for(var n=0;n<this.fields.length;n++){var a={};a[this.fields[n].field]=null,console.log(a),this.form.setFieldsValue(a)}else t=this.form.getFieldsValue();this.$emit("handleSearch",t)},handleExport:function(){this.$message.success("功能开发中")}},computed:{formItemLayout:function(){var e=this.formLayout;return"horizontal"===e?{labelCol:{span:4},wrapperCol:{span:14}}:{}},buttonItemLayout:function(){var e=this.formLayout;return"horizontal"===e?{wrapperCol:{span:14,offset:4}}:{}}}},u=c,d=n("2877"),f=Object(d["a"])(u,a,r,!1,null,null,null);f.options.__file="Index.vue";t["a"]=f.exports},c281:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-tree-select",{style:e.styleValue,attrs:{treeData:e.treeData,value:e.getValue(e.value),searchPlaceholder:"请点击选择",treeNodeFilterProp:"label",disabled:e.disabled},on:{change:e.onChange}})},r=[],o=(n("24b4"),n("0e8f")),s={props:{value:{required:!1,default:function(){return""}},styleValue:{required:!1,default:function(){return{"min-width":"200px"}}},disabled:{required:!1,type:Boolean,default:function(){return!1}}},model:{prop:"value",event:"change"},data:function(){return{treeData:[]}},methods:{getValue:function(e){return[e]},init:function(){var e=this;Object(o["h"])().then(function(t){e.treeData=t})},onChange:function(e){if(void 0===e)return this.$message.warning("选择错误，请重新选择"),!1;this.$emit("change",e?parseInt(e):0)}},watch:{},created:function(){this.init()}},i=s,l=n("2877"),c=Object(l["a"])(i,a,r,!1,null,null,null);c.options.__file="SelectUser.vue";t["a"]=c.exports},c405:function(e,t,n){"use strict";n.d(t,"d",function(){return i}),n.d(t,"f",function(){return l}),n.d(t,"e",function(){return c}),n.d(t,"c",function(){return u}),n.d(t,"a",function(){return d}),n.d(t,"g",function(){return f}),n.d(t,"b",function(){return m});n("6b54"),n("7f7f"),n("f751");var a=n("66df"),r=n("c0d6"),o="categories/",s=function(e){var t=e.current_page,n=void 0===t?0:t,s=e.filter,i=void 0===s?{}:s,l={current_page:n,filter:i};return l=Object.assign(l,{token:r["a"].state.common.token,access_token:r["a"].state.common.access_token}),a["a"].request({url:o,method:"get",params:l})},i=function(e){var t={};return t=Object.assign(t,{token:r["a"].state.common.token,access_token:r["a"].state.common.access_token}),a["a"].request({url:o+e+"/children_and_published_article",method:"get",params:t})},l=function(){return s({current_page:0,filter:{}}).then(function(e){for(var t={},n=0;n<e.data.rows.length;n++)t[e.data.rows[n].id]=e.data.rows[n];var a=10;while(a>0){for(var r in t)0!==t[r].parent_id&&t[r].level===a&&(t[t[r].parent_id].hasOwnProperty("children")||(t[t[r].parent_id].children=[]),t[t[r].parent_id].children.push(t[r]),delete t[r]);a--}var o=[];for(var s in t)o.push(t[s]);return o})},c=function(){return s({current_page:0,filter:{}}).then(function(e){for(var t={},n=0;n<e.data.rows.length;n++)t[e.data.rows[n].id]={id:e.data.rows[n].id,parent_id:e.data.rows[n].parent_id,label:e.data.rows[n].name+" - 文章 "+e.data.rows[n].posts_count+" 篇",level:e.data.rows[n].level,value:e.data.rows[n].id.toString()};var a=10;while(a>0){for(var r in t)0!==t[r].parent_id&&t[r].level===a&&(t[t[r].parent_id].hasOwnProperty("children")||(t[t[r].parent_id].children=[]),t[t[r].parent_id].children.push(t[r]),delete t[r]);a--}var o=[];for(var s in t)o.push(t[s]);return o})},u=function(e){var t={token:r["a"].state.common.token,access_token:r["a"].state.common.access_token};return a["a"].request({url:o+e,method:"get",params:t})},d=function(e){var t={data:e},n={token:r["a"].state.common.token,access_token:r["a"].state.common.access_token};return a["a"].request({url:o,method:"post",data:t,params:n})},f=function(e,t){var n={data:t},s={token:r["a"].state.common.token,access_token:r["a"].state.common.access_token};return a["a"].request({url:o+e,method:"put",data:n,params:s})},m=function(e){var t={token:r["a"].state.common.token,access_token:r["a"].state.common.access_token};return a["a"].request({url:o+e,method:"delete",params:t})}},c424:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("a-date-picker",{staticStyle:{width:"190px"},attrs:{showTime:"",format:"YYYY-MM-DD HH:mm:ss",placeholder:e.placeholder,value:e.getValue(e.value)},on:{change:e.onChange,ok:e.onOk}})},r=[],o=(n("c5f6"),{props:{value:{type:Number,required:!1},placeholder:{required:!1,type:String,default:function(){return"点击选择"}}},model:{prop:"value",event:"change"},methods:{getValue:function(e){return isNaN(e)?e:moment(1e3*e)},onChange:function(e,t){var n=e?e.valueOf()/1e3:null;console.log(parseInt(n)),this.$emit("change",parseInt(n))},onOk:function(e){var t=e?e.valueOf()/1e3:null;console.log(parseInt(t)),this.$emit("change",parseInt(t))}}}),s=o,i=n("2877"),l=Object(i["a"])(s,a,r,!1,null,null,null);l.options.__file="DateTime.vue";t["a"]=l.exports},d17f:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",e._l(e.questions,function(t,a){return n("div",[n("p",[e._v("\n            "+e._s(a+1)+"."+e._s(t.title)+"\n            "),t.user_answers_format?[t.hasOwnProperty("is_correct")?[t.is_correct?[e._v("\n                        回答正确！正确答案："+e._s(e.getAnswer(t))+"\n                    ")]:[e._v("\n                        回答错误。正确答案："+e._s(e.getAnswer(t))+"\n                    ")]]:[e._v("\n                    ( "),n("b",{staticStyle:{color:"#DA3639"}},[e._v(e._s(t.user_answers_format))]),e._v(" )\n                ")]]:e._e()],2),t.answers.length<=1?n("a-radio-group",{attrs:{value:e.getValue("radio",t)},on:{change:function(t){e.setAnswers(t,a,"radio")}}},e._l(t.options,function(t,a){return n("a-radio",{key:a,attrs:{value:a}},[e._v("\n                "+e._s(a+". "+t)+"\n            ")])})):n("a-checkbox-group",{attrs:{value:e.getValue("checkbox",t)},on:{change:function(t){e.setAnswers(t,a,"checkbox")}}},e._l(t.options,function(t,a){return n("a-checkbox",{key:a,attrs:{value:a}},[e._v("\n                "+e._s(a+". "+t)+"\n            ")])})),n("div",{staticClass:"line_xx"})],1)}))},r=[],o=(n("6b54"),n("55dd"),{props:{questions:{type:Array}},model:{prop:"questions",event:"change"},computed:{},methods:{setAnswers:function(e,t,n){var a=JSON.parse(JSON.stringify(this.questions));switch(n){case"radio":this.$set(a[t],"user_answers",[e.target.value]),this.$set(a[t],"user_answers_format",e.target.value);break;case"checkbox":var r=e;r.sort(),this.$set(a[t],"user_answers",r),this.$set(a[t],"user_answers_format",r.join(","));break}this.$emit("change",a)},getAnswer:function(e){return e.answers.toString()},getValue:function(e,t){var n=t.user_answers,a=null;switch(e){case"radio":n&&n.length&&(a=n[0]);break;case"checkbox":a=n;break}return console.log(a),a}}}),s=o,i=n("2877"),l=Object(i["a"])(s,a,r,!1,null,null,null);l.options.__file="Index.vue";var c=l.exports;t["a"]=c},e35b:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("TopButtons"),n("div",{staticStyle:{height:"10px"}}),n("filter-component",{attrs:{fields:e.filterFields},on:{handleSearch:e.handleSearch}}),n("div",{staticStyle:{height:"10px"}}),n("div",{staticStyle:{height:"400px"},attrs:{id:"split-pane-container"}},[n("split-pane",{attrs:{"min-percent":20,"default-percent":70,split:"vertical"},on:{resize:e.resize}},[n("template",{slot:"paneL"},[n("table-component",{ref:"table",attrs:{columns:e.columns,rowSelection:e.rowSelection,request:e.tableRequest},on:{handleOperate:e.handleOperate}})],1),n("template",{slot:"paneR"},[n("a-card",[e.questions.length?n("Questions",{attrs:{questions:e.questions}}):n("div",[n("h1",[e._v("请选择题目")])])],1)],1)],2)],1)],1)},r=[],o=(n("cadf"),n("551c"),n("097d"),n("1eb1")),s=(n("f751"),n("66df")),i=n("c0d6"),l="exam_collect_questions/",c=function(e){var t=e.current_page,n=void 0===t?0:t,a=e.filter,r=void 0===a?{}:a,o={current_page:n,filter:r};return o=Object.assign(o,{token:i["a"].state.common.token,access_token:i["a"].state.common.access_token}),s["a"].request({url:l,method:"get",params:o})},u=function(e){var t={token:i["a"].state.common.token,access_token:i["a"].state.common.access_token};return s["a"].request({url:l+e,method:"delete",params:t})},d=n("e8c4"),f=n("a2ac"),m=n("d17f"),p={components:{TopButtons:o["a"],tableComponent:d["a"],filterComponent:f["a"],Questions:m["a"]},data:function(){var e=this;return{modalTitle:null,modalVisible:!1,formId:0,tableRequest:c,filterFields:[{label:"关键字",field:"keyword"},{label:"日期",field:"start_timestamp"},{label:"-",field:"end_timestamp"}],columns:[{title:"#",dataIndex:"index",scopedSlots:{customRender:"index"}},{title:"题目",dataIndex:"title",key:"title"},{title:"操作",dataIndex:"operation",scopedSlots:{customRender:"operation"},buttons:{delete:{visible:!0,disable:!1}}}],tableHeight:"0px",questions:[],rowSelection:{onChange:function(t,n){for(var a=[],r=0;r<n.length;r++)a.push(n[r].snapshot);e.questions=a,e.$nextTick(function(){e.resize()})}}}},methods:{handleSearch:function(e){this.$refs.table.handleSearch(e)},handleOperate:function(e,t){var n=this;switch(e){case"check":this.$router.push({name:"在线考试",params:{id:t.id}});break;case"delete":u(t.id).then(function(e){n.$message.success("删除成功"),n.$refs.table.reFetch().then(function(e){n.$nextTick(function(){n.resize()})})});break}},resize:function(){var e=$($(".ant-card")[0]).height(),t=$($(".ant-card")[1]).height(),n=e>t?e:t;$("#split-pane-container").height(n)}},mounted:function(){}},h=p,v=n("2877"),_=Object(v["a"])(h,a,r,!1,null,null,null);_.options.__file="Index.vue";t["default"]=_.exports}}]);
//# sourceMappingURL=chunk-2535.49596442.js.map