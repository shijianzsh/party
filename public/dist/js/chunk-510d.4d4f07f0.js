(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-510d"],{"0bfb":function(t,e,a){"use strict";var n=a("cb7c");t.exports=function(){var t=n(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},3846:function(t,e,a){a("9e1e")&&"g"!=/./g.flags&&a("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:a("0bfb")})},4561:function(t,e,a){},"60f7":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a-tree-select",{style:t.styleValue,attrs:{treeData:t.treeData,value:null!==t.value&&0!==t.value?t.value.toString():null,searchPlaceholder:"请点击选择",treeNodeFilterProp:"label"},on:{change:t.onChange}})},i=[],r=(a("24b4"),a("c405")),l={props:{value:{required:!1,default:function(){return""}},styleValue:{required:!1,default:function(){return{"min-width":"200px"}}}},model:{prop:"value",event:"change"},data:function(){return{treeData:[]}},methods:{init:function(){var t=this;Object(r["e"])().then(function(e){t.treeData=e})},onChange:function(t){this.$emit("change",t?parseInt(t):0)}},watch:{},created:function(){this.init()}},o=l,s=a("2877"),u=Object(s["a"])(o,n,i,!1,null,null,null);u.options.__file="SelectCategory.vue";e["a"]=u.exports},"6b54":function(t,e,a){"use strict";a("3846");var n=a("cb7c"),i=a("0bfb"),r=a("9e1e"),l="toString",o=/./[l],s=function(t){a("2aba")(RegExp.prototype,l,t,!0)};a("79e5")(function(){return"/a/b"!=o.call({source:"a",flags:"b"})})?s(function(){var t=n(this);return"/".concat(t.source,"/","flags"in t?t.flags:!r&&t instanceof RegExp?i.call(t):void 0)}):o.name!=l&&s(function(){return o.call(this)})},7304:function(t,e,a){"use strict";var n=a("4561"),i=a.n(n);i.a},"7f7f":function(t,e,a){var n=a("86cc").f,i=Function.prototype,r=/^\s*function ([^ (]*)/,l="name";l in i||a("9e1e")&&n(i,l,{configurable:!0,get:function(){try{return(""+this).match(r)[1]}catch(t){return""}}})},9068:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("upload-images",{attrs:{length:1,msg:t.msg},model:{value:t.list,callback:function(e){t.list=e},expression:"list"}})],1)},i=[],r=(a("cadf"),a("551c"),a("097d"),a("a386")),l=a("90de"),o={components:{uploadImages:r["a"]},props:{value:{required:!1,type:[String],default:function(){return""}},msg:{required:!1,type:String,default:function(){return"点击上传"}}},model:{prop:"value",event:"change"},data:function(){return{list:[]}},watch:{value:function(t){t&&(this.list=[{uid:-1,name:Object(l["e"])(t),url:t}])},list:function(t){var e=t.length?t[0].url:"";this.$emit("change",e)}}},s=o,u=a("2877"),c=Object(u["a"])(s,n,i,!1,null,null,null);c.options.__file="UploadThumbnail.vue";e["a"]=c.exports},a386:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"clearfix"},[a("a-upload",{attrs:{action:this.$store.state.common.uploadUrl,listType:"picture-card",fileList:t.fileList},on:{preview:t.handlePreview,change:t.handleChange}},[t.fileList.length<t.length?a("div",[a("a-icon",{attrs:{type:"plus"}}),a("div",{staticClass:"ant-upload-text"},[t._v(t._s(t.msg))])],1):t._e()]),a("a-modal",{attrs:{visible:t.previewVisible,footer:null},on:{cancel:t.handleCancel}},[a("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:t.previewImage}})])],1)},i=[],r=(a("c5f6"),a("90de")),l={props:{value:{required:!1,type:[Array],default:function(){return[]}},length:{type:Number,default:1},msg:{required:!1,type:String,default:function(){return"点击上传"}}},model:{prop:"value",event:"change"},data:function(){return{previewVisible:!1,previewImage:"",fileList:[]}},methods:{handleCancel:function(){this.previewVisible=!1},handlePreview:function(t){var e=t.url?this.$store.state.common.fileBaseUrl+t.url:null;e=e||t.thumbUrl,this.previewImage=e,this.previewVisible=!0},handleChange:function(t){var e=t.fileList;this.fileList=e;for(var a=[],n=0;n<this.fileList.length;n++)this.fileList[n].hasOwnProperty("response")&&this.fileList[n].response&&(this.fileList[n].url=this.fileList[n].response.data),a.push(this.fileList[n]),a[n].thumbUrl=Object(r["f"])(a[n].url),a[n].originFileObj=null,a[n].lastModifiedDate=null;this.$emit("change",a)}},watch:{value:function(t){if(!t||!t.hasOwnProperty("length"))return!1;for(var e=0;e<t.length;e++)!t[e].hasOwnProperty("thumbUrl")&&t[e].url&&(t[e].thumbUrl=this.$store.state.common.fileBaseUrl+t[e].url);this.fileList=t}}},o=l,s=(a("7304"),a("2877")),u=Object(s["a"])(o,n,i,!1,null,null,null);u.options.__file="UploadImages.vue";e["a"]=u.exports},c405:function(t,e,a){"use strict";a.d(e,"d",function(){return o}),a.d(e,"f",function(){return s}),a.d(e,"e",function(){return u}),a.d(e,"c",function(){return c}),a.d(e,"a",function(){return d}),a.d(e,"g",function(){return f}),a.d(e,"b",function(){return p});a("6b54"),a("7f7f"),a("f751");var n=a("66df"),i=a("c0d6"),r="categories/",l=function(t){var e=t.current_page,a=void 0===e?0:e,l=t.filter,o=void 0===l?{}:l,s={current_page:a,filter:o};return s=Object.assign(s,{token:i["a"].state.common.token,access_token:i["a"].state.common.access_token}),n["a"].request({url:r,method:"get",params:s})},o=function(t){var e={};return e=Object.assign(e,{token:i["a"].state.common.token,access_token:i["a"].state.common.access_token}),n["a"].request({url:r+t+"/children_and_published_article",method:"get",params:e})},s=function(){return l({current_page:0,filter:{}}).then(function(t){for(var e={},a=0;a<t.data.rows.length;a++)e[t.data.rows[a].id]=t.data.rows[a];var n=10;while(n>0){for(var i in e)0!==e[i].parent_id&&e[i].level===n&&(e[e[i].parent_id].hasOwnProperty("children")||(e[e[i].parent_id].children=[]),e[e[i].parent_id].children.push(e[i]),delete e[i]);n--}var r=[];for(var l in e)r.push(e[l]);return r})},u=function(){return l({current_page:0,filter:{}}).then(function(t){for(var e={},a=0;a<t.data.rows.length;a++)e[t.data.rows[a].id]={id:t.data.rows[a].id,parent_id:t.data.rows[a].parent_id,label:t.data.rows[a].name+" - 文章 "+t.data.rows[a].posts_count+" 篇",level:t.data.rows[a].level,value:t.data.rows[a].id.toString()};var n=10;while(n>0){for(var i in e)0!==e[i].parent_id&&e[i].level===n&&(e[e[i].parent_id].hasOwnProperty("children")||(e[e[i].parent_id].children=[]),e[e[i].parent_id].children.push(e[i]),delete e[i]);n--}var r=[];for(var l in e)r.push(e[l]);return r})},c=function(t){var e={token:i["a"].state.common.token,access_token:i["a"].state.common.access_token};return n["a"].request({url:r+t,method:"get",params:e})},d=function(t){var e={data:t},a={token:i["a"].state.common.token,access_token:i["a"].state.common.access_token};return n["a"].request({url:r,method:"post",data:e,params:a})},f=function(t,e){var a={data:e},l={token:i["a"].state.common.token,access_token:i["a"].state.common.access_token};return n["a"].request({url:r+t,method:"put",data:a,params:l})},p=function(t){var e={token:i["a"].state.common.token,access_token:i["a"].state.common.access_token};return n["a"].request({url:r+t,method:"delete",params:e})}},e7f6:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-button",{staticStyle:{"margin-bottom":"10px"},attrs:{type:"primary"},on:{click:function(e){t.handleCreate()}}},[t._v("新增")]),a("a-table",{attrs:{columns:t.columns,rowKey:"id",dataSource:t.data,pagination:!1},scopedSlots:t._u([{key:"operation",fn:function(e,n,i){return[a("div",{staticClass:"editable-row-operations"},[a("a-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.handleCreate(n.id)}}},[t._v("新增子栏目\n                ")]),a("a-divider",{attrs:{type:"vertical"}}),a("a-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.handleEdit(n)}}},[t._v("编辑\n                ")]),a("a-divider",{attrs:{type:"vertical"}}),a("a-popconfirm",{attrs:{title:"确认要删除吗?",okText:"是",cancelText:"否"},on:{confirm:function(e){t.handleDelete(n.id)}}},[a("a-button",{attrs:{type:"danger",size:"small"}},[t._v("删除\n                    ")])],1)],1)]}}])}),a("modal",{ref:"modal",on:{dataInit:t.dataInit}})],1)},i=[],r=a("c405"),l=function(){var t=this,e=this,a=e.$createElement,n=e._self._c||a;return n("div",[n("a-modal",{attrs:{width:"60%",title:e.title,footer:null,destroyOnClose:!0},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[n("a-form",{attrs:{autoFormCreate:function(e){t.form=e}},on:{submit:e.handleSubmit}},[n("a-form-item",{attrs:{label:"父级栏目",labelCol:{span:5},wrapperCol:{span:18},fieldDecoratorId:"parent_id"}},[n("selectCategory")],1),n("a-form-item",{attrs:{label:"排序",labelCol:{span:5},wrapperCol:{span:18},fieldDecoratorId:"sort_order"}},[n("a-input")],1),n("a-form-item",{attrs:{label:"名称",labelCol:{span:5},wrapperCol:{span:18},fieldDecoratorId:"name",fieldDecoratorOptions:{rules:[{required:!0,message:"请输入名称"}]}}},[n("a-input")],1),n("a-form-item",{attrs:{label:"描述",labelCol:{span:5},wrapperCol:{span:18},fieldDecoratorId:"description"}},[n("a-input")],1),n("a-form-item",{attrs:{label:"栏目模板",labelCol:{span:5},wrapperCol:{span:18},fieldDecoratorId:"list_template"}},[n("a-select",{attrs:{placeholder:"请选择"}},[n("a-select-option",{attrs:{value:"list"}},[e._v("list")]),n("a-select-option",{attrs:{value:"list_online_learning"}},[e._v("list_online_learning")]),n("a-select-option",{attrs:{value:"list_news"}},[e._v("list_news")])],1)],1),n("a-form-item",{attrs:{label:"文章默认模板",labelCol:{span:5},wrapperCol:{span:18},fieldDecoratorId:"article_template"}},[n("a-select",{attrs:{placeholder:"请选择"}},[n("a-select-option",{attrs:{value:"article"}},[e._v("article")]),n("a-select-option",{attrs:{value:"article_video_comment"}},[e._v("article_video_comment")])],1)],1),n("a-form-item",{attrs:{label:"缩略图",labelCol:{span:5},wrapperCol:{span:18},fieldDecoratorId:"thumbnail"}},[n("upload-thumbnail")],1),n("a-form-item",{attrs:{wrapperCol:{span:12,offset:5}}},[n("a-button",{attrs:{type:"primary",htmlType:"submit"}},[e._v("\n                    提交\n                ")])],1)],1)],1)],1)},o=[],s=(a("7f7f"),a("cadf"),a("551c"),a("097d"),a("60f7")),u=a("9068"),c={components:{SelectCategory:s["a"],uploadThumbnail:u["a"]},data:function(){return{visible:!1,title:"",form:null,isEdit:!1,id:null,updateUploadThumbnailInitUrl:null}},methods:{show:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(e){this.title="编辑栏目",this.isEdit=!0,this.id=e.id;var n=e.more&&e.more.hasOwnProperty("thumbnail")?e.more.thumbnail:"";this.updateUploadThumbnailInitUrl=n,setTimeout(function(a){t.form.setFieldsValue({parent_id:e.parent_id,sort_order:e.sort_order,name:e.name,description:e.description,list_template:e.list_template,aritcle_template:e.aritcle_template,thumbnail:n})},500)}else this.title="新增栏目",this.isEdit=!1,this.id=null;a&&setTimeout(function(e){t.form.setFieldsValue({parent_id:a})},500),this.visible=!0},beforeSubmit:function(){var t=!1;return this.form.validateFields(function(e){if(e)return!1;t=!0}),t},handleSubmit:function(t){var e,a=this;return t.preventDefault(),e=this.isEdit?Object(r["g"])(this.id,this.form.getFieldsValue()):Object(r["a"])(this.form.getFieldsValue()),e.then(function(t){var e=a.isEdit?"更新成功":"新增成功";a.$message.success(e),a.$emit("dataInit"),a.visible=!1}),!0}}},d=c,f=a("2877"),p=Object(f["a"])(d,l,o,!1,null,null,null);p.options.__file="Modal.vue";var m=p.exports,h=[{title:"id",dataIndex:"id",key:"id"},{title:"分类名称",dataIndex:"name",key:"name"},{title:"文章数量",dataIndex:"posts_count",key:"posts_count"},{title:"描述",dataIndex:"description",key:"description"},{title:"操作",dataIndex:"operation",scopedSlots:{customRender:"operation"}}],v={components:{modal:m},data:function(){return{data:[],columns:h}},methods:{dataInit:function(){var t=this;Object(r["f"])().then(function(e){t.data=e})},handleCreate:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.$refs.modal.show(null,t)},handleEdit:function(t){this.$refs.modal.show(t)},handleDelete:function(t){var e=this;Object(r["b"])(t).then(function(t){e.dataInit()})}},created:function(){this.dataInit()}},b=v,_=Object(f["a"])(b,n,i,!1,null,null,null);_.options.__file="Index.vue";e["default"]=_.exports}}]);
//# sourceMappingURL=chunk-510d.4d4f07f0.js.map