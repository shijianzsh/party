(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6880"],{1199:function(e,t,a){"use strict";a.d(t,"d",function(){return i}),a.d(t,"c",function(){return r}),a.d(t,"a",function(){return c}),a.d(t,"e",function(){return l}),a.d(t,"b",function(){return d});a("f751");var n=a("66df"),o=a("c0d6"),s="auth_roles/",i=function(e){var t=e.current_page,a=void 0===t?0:t,i=e.filter,r=void 0===i?{}:i,c={current_page:a,filter:r};return c=Object.assign(c,{token:o["a"].state.common.token,access_token:o["a"].state.common.access_token}),n["a"].request({url:s,method:"get",params:c})},r=function(e){var t={token:o["a"].state.common.token,access_token:o["a"].state.common.access_token};return n["a"].request({url:s+e,method:"get",params:t})},c=function(e){var t={data:Object.assign({user_id:o["a"].state.common.user_id},e)},a={token:o["a"].state.common.token,access_token:o["a"].state.common.access_token};return n["a"].request({url:s,method:"post",data:t,params:a})},l=function(e,t){var a={data:t},i={token:o["a"].state.common.token,access_token:o["a"].state.common.access_token};return n["a"].request({url:s+e,method:"put",data:a,params:i})},d=function(e){var t={token:o["a"].state.common.token,access_token:o["a"].state.common.access_token};return n["a"].request({url:s+e,method:"delete",params:t})}},9842:function(e,t,a){"use strict";var n=a("ef58"),o=a.n(n);o.a},ef58:function(e,t,a){},f47f:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("table-component",{ref:"table",attrs:{columns:e.columns,request:e.tableRequest},on:{handleOperate:e.handleOperate}},[a("template",{slot:"top"},[a("a-button",{attrs:{type:"primary"},on:{click:function(t){e.handleCreate()}}},[e._v("新增\n            ")]),a("div",{staticStyle:{height:"10px"}}),a("filter-component",{attrs:{fields:e.filterFields},on:{handleSearch:e.handleSearch}}),a("div",{staticStyle:{height:"10px"}})],1)],2),a("a-modal",{attrs:{width:"90%",title:e.modalTitle,footer:null,destroyOnClose:!0},model:{value:e.modalVisible,callback:function(t){e.modalVisible=t},expression:"modalVisible"}},[a("form-component",{attrs:{id:e.formId}})],1)],1)},o=[],s=(a("cadf"),a("551c"),a("097d"),a("1199")),i=a("e8c4"),r=a("a2ac"),c=function(){var e=this,t=this,a=t.$createElement,n=t._self._c||a;return n("div",[n("a-form",{attrs:{autoFormCreate:function(t){e.form=t},layout:"inline"},on:{submit:t.handleSubmit}},[n("a-form-item",{attrs:{label:"名称",labelCol:{span:5},wrapperCol:{span:19},fieldDecoratorId:"name",fieldDecoratorOptions:{rules:[{required:!0,message:"Please input your note!"}]}}},[n("a-input")],1),n("a-form-item",[n("a-button",{attrs:{type:"primary",htmlType:"submit"}},[t._v("\n                提交\n            ")])],1)],1),t.hasSelected?n("div",{staticStyle:{"margin-bottom":"10px","margin-top":"10px","margin-left":"8px"}},[t._v("\n        "+t._s("已选 "+t.selectedRowKeys.length+" 项")+"\n    ")]):t._e(),n("a-table",{attrs:{pagination:!1,rowKey:"id",size:"small",rowSelection:{selectedRowKeys:t.selectedRowKeys,onChange:t.onSelectChange},columns:t.columns,dataSource:t.data}})],1)},l=[],d=(a("7f7f"),a("c5f6"),a("ba48")),u={props:{id:{required:!1,type:Number,default:function(){return 0}}},data:function(){return{form:{},data:[],columns:[{title:"权限",dataIndex:"auth_format",key:"auth_format"},{title:"描述1",dataIndex:"description_1",key:"description_1"},{title:"描述2",dataIndex:"description_2",key:"description_2"}],selectedRowKeys:[],loading:!1}},computed:{hasSelected:function(){return this.selectedRowKeys.length>0}},methods:{fetch:function(){var e=this;Object(d["b"])({current_page:0,filter:{}}).then(function(t){e.data=t.data.rows}),this.id&&Object(s["c"])(this.id).then(function(t){e.selectedRowKeys=t.data.auth_map_ids,e.form.setFieldsValue({name:t.data.name})})},handleSubmit:function(e){var t=this;e.preventDefault();var a,n=this.form.getFieldsValue();n.map_ids=this.selectedRowKeys,a=this.id?Object(s["e"])(this.id,n):Object(s["a"])(n),a.then(function(e){t.$message.success("操作成功")})},onSelectChange:function(e){console.log("selectedRowKeys changed: ",e),this.selectedRowKeys=e}},mounted:function(){this.fetch()}},m=u,f=a("2877"),h=Object(f["a"])(m,c,l,!1,null,null,null);h.options.__file="Form.vue";var p=h.exports,b={components:{filterComponent:r["a"],tableComponent:i["a"],FormComponent:p},data:function(){return{modalTitle:null,modalVisible:!1,formId:0,columns:[{title:"#",dataIndex:"index",scopedSlots:{customRender:"index"}},{title:"名称",dataIndex:"name",key:"name"},{title:"权限数量",dataIndex:"auth_count",key:"auth_count"},{title:"最后修改日期",dataIndex:"updated_at",key:"updated_at"},{title:"操作",dataIndex:"operation",scopedSlots:{customRender:"operation"},buttons:{edit:{visible:!0,disable:!1},delete:{visible:!0,disable:function(e){return!!e.users.length}}}}],tableRequest:s["d"],filterFields:[{label:"关键字",field:"keyword"}]}},methods:{handleSearch:function(e){this.$refs.table.handleSearch(e)},handleCreate:function(){this.modalTitle="新增角色",this.modalVisible=!0,this.formId=null},handleEdit:function(e){this.modalTitle="编辑角色",this.modalVisible=!0,this.formId=e},handleOperate:function(e,t){var a=this;switch(e){case"create":this.handleCreate();break;case"edit":this.handleEdit(t.id);break;case"delete":Object(s["b"])(t.id).then(function(e){a.$message.success("删除成功"),a.$refs.table.reFetch()});break}}}},_=b,k=(a("9842"),Object(f["a"])(_,n,o,!1,null,"cb6e0c64",null));k.options.__file="Index.vue";t["default"]=k.exports}}]);
//# sourceMappingURL=chunk-6880.8c717b3e.js.map