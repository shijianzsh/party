(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a627"],{"0bfb":function(e,t,a){"use strict";var n=a("cb7c");e.exports=function(){var e=n(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},"0e8f":function(e,t,a){"use strict";a.d(t,"e",function(){return o}),a.d(t,"d",function(){return s}),a.d(t,"g",function(){return u}),a.d(t,"f",function(){return c}),a.d(t,"h",function(){return d}),a.d(t,"c",function(){return f}),a.d(t,"a",function(){return p}),a.d(t,"i",function(){return m}),a.d(t,"b",function(){return h});a("6b54"),a("7f7f"),a("f751"),a("cadf"),a("551c"),a("097d");var n=a("66df"),r=a("c0d6"),i="departments/",o=function(e){var t=e.current_page,a=void 0===t?0:t,o=e.filter,l=void 0===o?{}:o,s=e.with,u={current_page:a,filter:l,with:["parent"].concat(s||[])};return u=Object.assign(u,{token:r["a"].state.common.token,access_token:r["a"].state.common.access_token}),n["a"].request({url:i,method:"get",params:u})},l=function(e){var t=e.filter,a=void 0===t?{}:t,o=e.with,l={filter:a,with:["parent"].concat(o||[])};return l=Object.assign(l,{token:r["a"].state.common.token,access_token:r["a"].state.common.access_token}),n["a"].request({url:i+"select_component",method:"get",params:l})},s=function(e){var t={};return t=Object.assign(t,{token:r["a"].state.common.token,access_token:r["a"].state.common.access_token}),n["a"].request({url:i+e+"/coordinate",method:"get",params:t})},u=function(){return o({current_page:0,filter:{}}).then(function(e){for(var t={},a=0;a<e.data.rows.length;a++)t[e.data.rows[a].id]=e.data.rows[a];var n=10;while(n>0){for(var r in t)0!==t[r].parent_id&&t[r].level===n&&(t[t[r].parent_id].hasOwnProperty("children")||(t[t[r].parent_id].children=[]),t[t[r].parent_id].children.push(t[r]),delete t[r]);n--}var i=[];for(var o in t)i.push(t[o]);return e.data.rows=i,e})},c=function(){return l({filter:{}}).then(function(e){for(var t=e.data,a={},n=0;n<t.length;n++)a[t[n].id]={id:t[n].id,parent_id:t[n].parent_id,label:t[n].name,level:t[n].level,value:t[n].id.toString()};var r=10;while(r>0){for(var i in a)0!==a[i].parent_id&&a[i].level===r&&(a[a[i].parent_id].hasOwnProperty("children")||(a[a[i].parent_id].children=[]),a[a[i].parent_id].children.push(a[i]),delete a[i]);r--}var o=[];for(var l in a)o.push(a[l]);return o})},d=function(){return l({filter:{},with:["Users"]}).then(function(e){for(var t=e.data,a={},n=0;n<t.length;n++){for(var r=0;r<t[n].users.length;r++)t[n].users[r].label=t[n].users[r].user_name,t[n].users[r].value=t[n].users[r].id;a[t[n].id]={id:t[n].id,parent_id:t[n].parent_id,label:t[n].name+" - 人员 "+t[n].users_count+" 人",level:t[n].level,children:t[n].users}}var i=[];for(var o in a)delete a[o]["id"],i.push(a[o]);return i})},f=function(e){var t={token:r["a"].state.common.token,access_token:r["a"].state.common.access_token};return n["a"].request({url:i+e,method:"get",params:t})},p=function(e){var t={data:e},a={token:r["a"].state.common.token,access_token:r["a"].state.common.access_token};return n["a"].request({url:i,method:"post",data:t,params:a})},m=function(e,t){var a={data:t},o={token:r["a"].state.common.token,access_token:r["a"].state.common.access_token};return n["a"].request({url:i+e,method:"put",data:a,params:o})},h=function(e){var t={token:r["a"].state.common.token,access_token:r["a"].state.common.access_token};return n["a"].request({url:i+e,method:"delete",params:t})}},3846:function(e,t,a){a("9e1e")&&"g"!=/./g.flags&&a("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:a("0bfb")})},4561:function(e,t,a){},"57f5":function(e,t,a){"use strict";var n=function(){var e=this,t=this,a=t.$createElement,n=t._self._c||a;return n("a-card",[n("a-row",[n("a-col",{attrs:{span:t.offset_computed[0]}}),n("a-col",{attrs:{span:24-t.offset_computed[0]-t.offset_computed[1]}},[n("a-form",{attrs:{autoFormCreate:function(t){e.form=t}},on:{submit:t.handleSubmit}},[n("a-card",{staticStyle:{width:"100%"},attrs:{title:"基本信息",bordered:!1}},[n("a-form-item",{attrs:{label:"创建日期",labelCol:{span:5},wrapperCol:{span:18},fieldDecoratorId:"established_at"}},[n("date-time")],1),n("a-form-item",{attrs:{label:"上级党支部",labelCol:{span:5},wrapperCol:{span:18},fieldDecoratorId:"parent_id"}},[n("SelectDepartment")],1),n("a-form-item",{attrs:{label:"名称",labelCol:{span:5},wrapperCol:{span:18},fieldDecoratorId:"name",fieldDecoratorOptions:{rules:[{required:!0,message:"请输入名称"}]}}},[n("a-input")],1),n("a-form-item",{attrs:{label:"位置",labelCol:{span:5},wrapperCol:{span:18},fieldDecoratorId:"location"}},[n("a-input")],1),n("a-form-item",{attrs:{label:"基本介绍",labelCol:{span:5},wrapperCol:{span:18},fieldDecoratorId:"introduce"}},[n("a-textarea",{attrs:{rows:4}})],1)],1),n("a-card",{staticStyle:{width:"100%"},attrs:{title:"百度地图坐标",bordered:!1}},[n("a-form-item",{attrs:{label:"x坐标",labelCol:{span:5},wrapperCol:{span:18},fieldDecoratorId:"coordinate_x"}},[n("a-input")],1),n("a-form-item",{attrs:{label:"y坐标",labelCol:{span:5},wrapperCol:{span:18},fieldDecoratorId:"coordinate_y"}},[n("a-input")],1)],1),n("a-card",{staticStyle:{width:"100%"},attrs:{title:"联系信息",bordered:!1}},[n("a-form-item",{attrs:{label:"座机",labelCol:{span:5},wrapperCol:{span:18},fieldDecoratorId:"telphone"}},[n("a-input")],1),n("a-form-item",{attrs:{label:"手机",labelCol:{span:5},wrapperCol:{span:18},fieldDecoratorId:"cellphone"}},[n("a-input")],1),n("a-form-item",{attrs:{label:"领导姓名",labelCol:{span:5},wrapperCol:{span:18},fieldDecoratorId:"secretary"}},[n("a-input")],1)],1),n("a-card",{staticStyle:{width:"100%"},attrs:{title:"附件",bordered:!1}},[n("a-form-item",{attrs:{label:"缩略图",labelCol:{span:5},wrapperCol:{span:18},fieldDecoratorId:"more_thumbnail"}},[n("upload-thumbnail")],1),n("a-form-item",{attrs:{label:"大屏地图",labelCol:{span:5},wrapperCol:{span:18},fieldDecoratorId:"more_monitor_map"}},[n("upload-thumbnail")],1),n("a-form-item",{attrs:{wrapperCol:{span:12,offset:5}}},[n("a-button",{attrs:{type:"primary",htmlType:"submit"}},[t._v("\n                            提交\n                        ")])],1)],1)],1)],1),n("a-col",{attrs:{span:t.offset_computed[1]}})],1)],1)},r=[],i=(a("7f7f"),a("c5f6"),a("0e8f")),o=a("9068"),l=a("88cd"),s=a("c424"),u={components:{SelectDepartment:l["a"],dateTime:s["a"],uploadThumbnail:o["a"]},props:{id:{required:!1,type:Number,default:function(){return 0}},parentId:{required:!1,type:Number,default:function(){return 0}},offset:{required:!1,type:Array,default:function(){return[0,0]}}},data:function(){return{form:null,isEdit:!1,establishedAtInitValue:null}},computed:{offset_computed:function(){if(2===this.offset.length)return this.offset;switch(this.offset.length){case 0:return[0,0];case 1:return[this.offset[0],0];case 2:return this.offset;default:return[this.offset[0],this.offset[1]]}}},methods:{init:function(){var e=this;this.id?(this.isEdit=!0,Object(i["c"])(this.id).then(function(t){var a=t.data;console.log(a),e.establishedAtInitValue=a.established_at,e.form.setFieldsValue({parent_id:a.parent_id,name:a.name,introduce:a.introduce,location:a.location,coordinate_x:a.coordinate_x,coordinate_y:a.coordinate_y,telphone:a.telphone,cellphone:a.cellphone,secretary:a.secretary,established_at:a.established_at,more_thumbnail:a.thumbnail_format,more_monitor_map:a.monitor_map_format})})):(this.title="新增单位",this.isEdit=!1,setTimeout(function(t){e.form.setFieldsValue({parent_id:e.parentId?e.parentId:0})},500))},beforeSubmit:function(e){return!0},handleSubmit:function(e){var t,a=this;return e.preventDefault(),t=this.isEdit?Object(i["i"])(this.id,this.form.getFieldsValue()):Object(i["a"])(this.form.getFieldsValue()),t.then(function(e){var t=a.isEdit?"更新成功":"新增成功";a.$message.success(t),a.$emit("dataInit"),a.visible=!1}),!0}},watch:{$route:{handler:function(e){this.init()}}},mounted:function(){this.init()}},c=u,d=a("2877"),f=Object(d["a"])(c,n,r,!1,null,null,null);f.options.__file="Index.vue";t["a"]=f.exports},"6b54":function(e,t,a){"use strict";a("3846");var n=a("cb7c"),r=a("0bfb"),i=a("9e1e"),o="toString",l=/./[o],s=function(e){a("2aba")(RegExp.prototype,o,e,!0)};a("79e5")(function(){return"/a/b"!=l.call({source:"a",flags:"b"})})?s(function(){var e=n(this);return"/".concat(e.source,"/","flags"in e?e.flags:!i&&e instanceof RegExp?r.call(e):void 0)}):l.name!=o&&s(function(){return l.call(this)})},7304:function(e,t,a){"use strict";var n=a("4561"),r=a.n(n);r.a},"88cd":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-tree-select",{style:e.styleValue,attrs:{treeData:e.treeData,value:null!==e.value&&0!==e.value?e.value.toString():null,searchPlaceholder:"请点击选择",treeNodeFilterProp:"label"},on:{change:e.onChange}})},r=[],i=(a("24b4"),a("0e8f")),o={props:{value:{required:!1,default:function(){return""}},styleValue:{required:!1,default:function(){return{"min-width":"200px"}}}},model:{prop:"value",event:"change"},data:function(){return{treeData:[]}},methods:{init:function(){var e=this;Object(i["f"])().then(function(t){e.treeData=t})},onChange:function(e){this.$emit("change",e?parseInt(e):0)}},watch:{},created:function(){this.init()}},l=o,s=a("2877"),u=Object(s["a"])(l,n,r,!1,null,null,null);u.options.__file="SelectDepartment.vue";t["a"]=u.exports},9068:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("upload-images",{attrs:{length:1,msg:e.msg},model:{value:e.list,callback:function(t){e.list=t},expression:"list"}})],1)},r=[],i=(a("cadf"),a("551c"),a("097d"),a("a386")),o=a("90de"),l={components:{uploadImages:i["a"]},props:{value:{required:!1,type:[String],default:function(){return""}},msg:{required:!1,type:String,default:function(){return"点击上传"}}},model:{prop:"value",event:"change"},data:function(){return{list:[]}},watch:{value:function(e){e&&(this.list=[{uid:-1,name:Object(o["e"])(e),url:e}])},list:function(e){var t=e.length?e[0].url:"";this.$emit("change",t)}}},s=l,u=a("2877"),c=Object(u["a"])(s,n,r,!1,null,null,null);c.options.__file="UploadThumbnail.vue";t["a"]=c.exports},a386:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"clearfix"},[a("a-upload",{attrs:{action:this.$store.state.common.uploadUrl,listType:"picture-card",fileList:e.fileList},on:{preview:e.handlePreview,change:e.handleChange}},[e.fileList.length<e.length?a("div",[a("a-icon",{attrs:{type:"plus"}}),a("div",{staticClass:"ant-upload-text"},[e._v(e._s(e.msg))])],1):e._e()]),a("a-modal",{attrs:{visible:e.previewVisible,footer:null},on:{cancel:e.handleCancel}},[a("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:e.previewImage}})])],1)},r=[],i=(a("c5f6"),a("90de")),o={props:{value:{required:!1,type:[Array],default:function(){return[]}},length:{type:Number,default:1},msg:{required:!1,type:String,default:function(){return"点击上传"}}},model:{prop:"value",event:"change"},data:function(){return{previewVisible:!1,previewImage:"",fileList:[]}},methods:{handleCancel:function(){this.previewVisible=!1},handlePreview:function(e){var t=e.url?this.$store.state.common.fileBaseUrl+e.url:null;t=t||e.thumbUrl,this.previewImage=t,this.previewVisible=!0},handleChange:function(e){var t=e.fileList;this.fileList=t;for(var a=[],n=0;n<this.fileList.length;n++)this.fileList[n].hasOwnProperty("response")&&this.fileList[n].response&&(this.fileList[n].url=this.fileList[n].response.data),a.push(this.fileList[n]),a[n].thumbUrl=Object(i["f"])(a[n].url),a[n].originFileObj=null,a[n].lastModifiedDate=null;this.$emit("change",a)}},watch:{value:function(e){if(!e||!e.hasOwnProperty("length"))return!1;for(var t=0;t<e.length;t++)!e[t].hasOwnProperty("thumbUrl")&&e[t].url&&(e[t].thumbUrl=this.$store.state.common.fileBaseUrl+e[t].url);this.fileList=e}}},l=o,s=(a("7304"),a("2877")),u=Object(s["a"])(l,n,r,!1,null,null,null);u.options.__file="UploadImages.vue";t["a"]=u.exports},c424:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a-date-picker",{staticStyle:{width:"190px"},attrs:{showTime:"",format:"YYYY-MM-DD HH:mm:ss",placeholder:e.placeholder,value:e.getValue(e.value)},on:{change:e.onChange,ok:e.onOk}})},r=[],i=(a("c5f6"),{props:{value:{type:Number,required:!1},placeholder:{required:!1,type:String,default:function(){return"点击选择"}}},model:{prop:"value",event:"change"},methods:{getValue:function(e){return isNaN(e)?e:moment(1e3*e)},onChange:function(e,t){var a=e?e.valueOf()/1e3:null;console.log(parseInt(a)),this.$emit("change",parseInt(a))},onOk:function(e){var t=e?e.valueOf()/1e3:null;console.log(parseInt(t)),this.$emit("change",parseInt(t))}}}),o=i,l=a("2877"),s=Object(l["a"])(o,n,r,!1,null,null,null);s.options.__file="DateTime.vue";t["a"]=s.exports}}]);
//# sourceMappingURL=chunk-a627.9ba4c91b.js.map